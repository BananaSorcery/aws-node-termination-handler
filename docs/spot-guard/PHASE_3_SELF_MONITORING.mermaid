graph TD
    subgraph "PHASE 3: SELF-MONITORING (On New On-Demand Node) (30s or 10min ?)"
        Phase3_Start[8. Self-Monitor Starts] --> K{10. Check: Spot Health?};
        K -- âœ… Yes --> L{11. Check: Cluster Util?};
        K -- âŒ No Ready --> O("Recheck after 10min");
        L -- âœ… Yes --> P{12. Check: PDBs Safe?};
        L -- âŒ No, Too High --> M("ðŸš€ Attempt Smart Pre-Scale");
        M --> N{Pre-scale Enabled?};
        N -- âœ… Yes --> CalPreScaleSpot["12. Calculate required spot instance to scale up"];
        N -- âŒ No --> KeepOndemand["Keep on-demand instance & continue monitoring cycle"];
        CalPreScaleSpot --> PreScaleSpot{Scale up spot instance};
        PreScaleSpot -- âœ… Success ---> P;
        PreScaleSpot -- âŒ Failure ---> KeepOndemand;
        P -- âœ… Yes --> Q["13. ðŸŽ¯ Scale Down This On-Demand Node"];
        Q --> Failure_Complete([âœ… Scale-Down Complete!]);
    end
